rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Settings: Public read, admin write
    match /settings/{settingId} {
      allow read: if true;
      // Allow write only if the user is authenticated and is an admin
      allow write: if request.auth != null && isAdmin();
    }

    // Gifts: Public read, anyone can create (add suggestion), admin can update/delete
    match /gifts/{giftId} {
      allow read: if true;
      // Allow creating a new gift document (for suggestions/selections) by anyone
      allow create: if true;
      // Allow update/delete only if the user is authenticated and is an admin
      allow update, delete: if request.auth != null && isAdmin();
    }

    // Function to check if the authenticated user is one of the admins
    function isAdmin() {
      // Check if the user is authenticated and their UID is in the admin list
      return request.auth != null && request.auth.uid in [
        // Replace with actual Admin User UIDs from Firebase Authentication
        'JoO9fy5roDY6FTtqajp1UG8aYzS2', // Example UID for fernandopicardi@gmail.com (REPLACE WITH ACTUAL UID)
        'VnCKbFH5nrYijsUda0fhK3HdwSF2'  // Example UID for naiaralofgren@gmail.com (REPLACE WITH ACTUAL UID)
        // Add other admin UIDs here if needed
      ];
    }

    // Deny writes to any other collections by default
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
